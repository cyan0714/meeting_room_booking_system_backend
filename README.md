# ä¼šè®®å®¤é¢„è®¢ç³»ç»Ÿåç«¯

ä¸€ä¸ªåŸºäº NestJS çš„ä¼ä¸šçº§ä¼šè®®å®¤é¢„è®¢ç®¡ç†ç³»ç»Ÿåç«¯æœåŠ¡ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€ä¼šè®®å®¤ç®¡ç†ã€é¢„è®¢ç®¡ç†å’Œç»Ÿè®¡åˆ†æåŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¯¥ç³»ç»Ÿä¸ºä¼ä¸šä¼šè®®å®¤é¢„è®¢æä¾›å®Œæ•´çš„åç«¯è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œç™»å½•ã€è§’è‰²æƒé™ç®¡ç†ã€ä¼šè®®å®¤ä¿¡æ¯ç®¡ç†ã€é¢„è®¢ç”³è¯·å®¡æ‰¹æµç¨‹ä»¥åŠä½¿ç”¨ç»Ÿè®¡åˆ†æç­‰åŠŸèƒ½ã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: NestJS 10.x
- **æ•°æ®åº“**: MySQL 8.x + TypeORM
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT (JSON Web Token)
- **é‚®ä»¶æœåŠ¡**: Nodemailer
- **APIæ–‡æ¡£**: Swagger/OpenAPI
- **éªŒè¯**: class-validator + class-transformer
- **æ–‡ä»¶ä¸Šä¼ **: Multer
- **å®¹å™¨åŒ–**: Docker + Docker Compose

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œ/ç™»å½• (æ”¯æŒæ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜)
- é‚®ç®±éªŒè¯ç éªŒè¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç† (å¤´åƒä¸Šä¼ ã€ä¸ªäººä¿¡æ¯ä¿®æ”¹)
- å¯†ç ä¿®æ”¹
- ç”¨æˆ·å†»ç»“/è§£å†»
- ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ä¸åˆ†é¡µ

### ğŸ‘¥ æƒé™ç®¡ç†
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ (RBAC)
- è§’è‰²-æƒé™å…³è”
- ç™»å½•çŠ¶æ€éªŒè¯
- æƒé™å®ˆå«

### ğŸ¢ ä¼šè®®å®¤ç®¡ç†
- ä¼šè®®å®¤ä¿¡æ¯ CRUD æ“ä½œ
- ä¼šè®®å®¤åˆ—è¡¨æŸ¥è¯¢ä¸ç­›é€‰
- æ”¯æŒæŒ‰åç§°ã€å®¹é‡ã€è®¾å¤‡ç­‰æ¡ä»¶ç­›é€‰
- ä¼šè®®å®¤é¢„è®¢çŠ¶æ€ç®¡ç†

### ğŸ“… é¢„è®¢ç®¡ç†
- ä¼šè®®å®¤é¢„è®¢ç”³è¯·
- é¢„è®¢æ—¶é—´å†²çªæ£€æµ‹
- é¢„è®¢çŠ¶æ€ç®¡ç† (ç”³è¯·ä¸­ã€å®¡æ‰¹é€šè¿‡ã€å®¡æ‰¹é©³å›ã€å·²è§£é™¤)
- é¢„è®¢å®¡æ‰¹æµç¨‹ (é€šè¿‡/é©³å›/è§£é™¤)
- é¢„è®¢å‚¬åŠåŠŸèƒ½
- é¢„è®¢åˆ—è¡¨æŸ¥è¯¢ä¸ç­›é€‰

### ğŸ“Š ç»Ÿè®¡åˆ†æ
- ç”¨æˆ·é¢„è®¢æ¬¡æ•°ç»Ÿè®¡
- ä¼šè®®å®¤ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡
- æ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰

### ğŸ“§ é‚®ä»¶æœåŠ¡
- æ³¨å†ŒéªŒè¯ç å‘é€
- å¯†ç ä¿®æ”¹éªŒè¯ç å‘é€
- ç”¨æˆ·ä¿¡æ¯æ›´æ–°éªŒè¯ç å‘é€
- é¢„è®¢å‚¬åŠé‚®ä»¶é€šçŸ¥

## ğŸ› ï¸ å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.x
- MySQL >= 8.0
- Redis >= 6.0
- Docker (å¯é€‰)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd meeting_room_booking_system_backend
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
åœ¨ `src` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
# æ•°æ®åº“é…ç½®
mysql_server_host=localhost
mysql_server_port=3306
mysql_server_username=root
mysql_server_password=123456
mysql_server_database=meeting_room_booking_system

# Redisé…ç½®
redis_server_host=localhost
redis_server_port=6379

# JWTé…ç½®
jwt_secret=your_jwt_secret_key
jwt_access_token_expires_time=30m
jwt_refresh_token_expres_time=7d

# é‚®ä»¶é…ç½®
nodemailer_host=smtp.qq.com
nodemailer_port=587
nodemailer_auth_user=your_email@qq.com
nodemailer_auth_pass=your_email_password

# æœåŠ¡ç«¯å£
nest_server_port=3005
```

4. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘æ¨¡å¼
npm run start:dev

# ç”Ÿäº§æ¨¡å¼
npm run build
npm run start:prod
```

### Docker éƒ¨ç½²

1. **ä½¿ç”¨ Docker Compose ä¸€é”®å¯åŠ¨**
```bash
docker-compose up -d
```

è¿™å°†å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š
- NestJS åº”ç”¨ (ç«¯å£: 3005)
- MySQL æ•°æ®åº“ (ç«¯å£: 3306)
- Redis ç¼“å­˜

2. **åˆå§‹åŒ–æ•°æ®**
è®¿é—® `http://localhost:3005/user/init-data` åˆå§‹åŒ–ç³»ç»Ÿæ•°æ®

## ğŸ“š API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—® [http://localhost:3005/api-doc](http://localhost:3005/api-doc) æŸ¥çœ‹å®Œæ•´çš„ Swagger API æ–‡æ¡£ã€‚

### ä¸»è¦ API ç«¯ç‚¹

#### ç”¨æˆ·ç®¡ç†
- `POST /user/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /user/login` - ç”¨æˆ·ç™»å½•
- `POST /user/admin/login` - ç®¡ç†å‘˜ç™»å½•
- `GET /user/info` - è·å–ç”¨æˆ·ä¿¡æ¯
- `GET /user/list` - ç”¨æˆ·åˆ—è¡¨

#### ä¼šè®®å®¤ç®¡ç†
- `GET /meeting-room/list` - ä¼šè®®å®¤åˆ—è¡¨
- `POST /meeting-room/create` - åˆ›å»ºä¼šè®®å®¤
- `PUT /meeting-room/update` - æ›´æ–°ä¼šè®®å®¤
- `DELETE /meeting-room/:id` - åˆ é™¤ä¼šè®®å®¤

#### é¢„è®¢ç®¡ç†
- `GET /booking/list` - é¢„è®¢åˆ—è¡¨
- `POST /booking/add` - åˆ›å»ºé¢„è®¢
- `GET /booking/apply/:id` - å®¡æ‰¹é€šè¿‡
- `GET /booking/reject/:id` - å®¡æ‰¹é©³å›
- `GET /booking/unbind/:id` - è§£é™¤é¢„è®¢

#### ç»Ÿè®¡åˆ†æ
- `GET /statistic/userBookingCount` - ç”¨æˆ·é¢„è®¢ç»Ÿè®¡
- `GET /statistic/meetingRoomUsedCount` - ä¼šè®®å®¤ä½¿ç”¨ç»Ÿè®¡

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

- **users** - ç”¨æˆ·è¡¨
- **roles** - è§’è‰²è¡¨
- **permissions** - æƒé™è¡¨
- **user_roles** - ç”¨æˆ·è§’è‰²å…³è”è¡¨
- **meeting_room** - ä¼šè®®å®¤è¡¨
- **booking** - é¢„è®¢è¡¨

æ•°æ®åº“ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ï¼ˆsynchronize: trueï¼‰ã€‚

## ğŸ“ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘
npm run start:dev

# æ„å»º
npm run build

# æµ‹è¯•
npm run test
npm run test:e2e

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥
npm run lint

# REPL æ¨¡å¼ (è°ƒè¯•ç”¨)
npm run repl
```

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®æ–‡ä»¶

- `package.json` - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
- `tsconfig.json` - TypeScript é…ç½®
- `nest-cli.json` - NestJS CLI é…ç½®
- `docker-compose.yml` - Docker ç¼–æ’é…ç½®
- `Dockerfile` - Docker é•œåƒæ„å»ºé…ç½®

### ç¯å¢ƒå˜é‡

ç³»ç»Ÿé€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œæ‰€æœ‰é…ç½®é¡¹éƒ½åœ¨ `.env` æ–‡ä»¶ä¸­å®šä¹‰ã€‚ä¸»è¦é…ç½®åŒ…æ‹¬ï¼š

- æ•°æ®åº“è¿æ¥ä¿¡æ¯
- Redis è¿æ¥ä¿¡æ¯
- JWT å¯†é’¥å’Œè¿‡æœŸæ—¶é—´
- é‚®ä»¶æœåŠ¡é…ç½®
- æœåŠ¡ç«¯å£

## ğŸš¦ é¡¹ç›®çŠ¶æ€

- âœ… ç”¨æˆ·ç®¡ç†æ¨¡å—
- âœ… æƒé™ç®¡ç†æ¨¡å—
- âœ… ä¼šè®®å®¤ç®¡ç†æ¨¡å—
- âœ… é¢„è®¢ç®¡ç†æ¨¡å—
- âœ… ç»Ÿè®¡åˆ†ææ¨¡å—
- âœ… é‚®ä»¶æœåŠ¡æ¨¡å—
- âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- âœ… API æ–‡æ¡£
- âœ… Docker éƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
